#include<bits/stdc++.h>
using namespace std;

string solve(string s) {
	stack<char> a, b, c;
	for(int i = 0; i < s.length(); ++i) {
		if(s[i] == '(') {
			if(i == 0 || s[i - 1] == '+') c.push('+');
			else c.push('-');
		}
		if(s[i] != ')') a.push(s[i]);
		else {
			char j = c.top(); c.pop();
			while(a.top() != '(') {
				b.push(a.top()); a.pop();
			}
			a.pop();
			if(j == '+') {
				while(b.size()) a.push(b.top()), b.pop();
			}
			else while(b.size()) {
				char x = b.top(); b.pop();
				if(x == '-') x = '+';
				else if(x == '+') x = '-';
				a.push(x);
			}
		}
	}
	string ans = "";
	while(a.size()) ans = string(1,a.top()) + ans, a.pop();
	return ans;
}

int main() {
	int t; cin >> t;
	while(t--) {
		string a, b; cin >> a >> b;
		if(solve(a) == solve(b)) cout << "YES" << endl;
		else cout << "NO" << endl;
	}
}
