#include<bits/stdc++.h>
using namespace std;

int main() {
	int t; cin >> t;
	while(t--) {
		int n; string s, f; cin >> n >> s >> f;
		set<string> se;
		for(int i = 0; i < n; ++i) {
			string x; cin >> x;
			se.insert(x);
		}
		se.erase(s);
		queue<pair<string, int>> q;
		q.push({s, 1});
		while(q.size()) {
//			if(!se.count(f)) break;
			pair<string, int> p = q.front(); q.pop();
			string a = p.first; int b = p.second;
			if(a == f) {
				cout << b << endl;
				break;
			}
			for(int i = 0; i < s.size(); ++i) {
				char tmp = a[i];
				for(char j = 'A'; j <= 'Z'; ++j) {
					a[i] = j;
					if(se.count(a)) {
//						if(a == f) {
//							cout << b + 1 << endl;
//							break;
//						}
						se.erase(a);
						q.push({a, b + 1});
					}
				}
				a[i] = tmp;
			}
		}
	}
}
