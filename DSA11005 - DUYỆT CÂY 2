#include<bits/stdc++.h>
using namespace std;

int in[1005], level[1005], ttin[1005], n;

void post(int l, int r) {
	if(l > r) return;
	int idx;
	for(int i = 0; i <= n; ++i) {
		int j = ttin[level[i]];
		if(j >= l && j <= r) {
			idx = j;
			break;
		}
	}
	post(l, idx - 1);
	post(idx + 1, r);
	cout << in[idx] << " ";
}

int main() {
	int t; cin >> t;
	while(t--) {
		cin >> n;
		for(int i = 0; i < n; ++i) cin >> in[i], ttin[in[i]] = i;
		for(int i = 0; i < n; ++i) cin >> level[i];
		post(0, n - 1);
		cout << endl;
	}
}
